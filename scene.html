<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SCENE</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        canvas { display: block; }
    </style>
</head>
<body>
    <!-- Include Three.js library -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <!-- Include OrbitControls -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
    <!-- Include RGBELoader for loading HDR or EXR files -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/RGBELoader.js"></script>

    <script>
        (() => {
            // --- Create Scene ---
            const scene = new THREE.Scene();

            // --- Create Perspective Camera ---
            const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 100);
            camera.position.set(0, 1.5, 4);

            // --- Create Renderer ---
            const renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            // --- Load HDR Background ---
            const rgbeLoader = new THREE.RGBELoader();
            rgbeLoader.setDataType(THREE.UnsignedByteType); // Optional: You can set this depending on the file type
            rgbeLoader.load('https://pollakritlu.github.io/kasert/qwantani_night_puresky_4k.hdr', (texture) => {
                // Set the loaded HDR as the scene background
                scene.background = texture;
                scene.environment = texture; // You can also apply this for lighting effects
            });

            // --- Set up OrbitControls ---
            const controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.target.set(0, 0.5, 0);
            controls.enableDamping = true;
            controls.dampingFactor = 0.25;
            controls.screenSpacePanning = false;

            // --- Create Grid Helper ---
            const grid = new THREE.GridHelper(10, 10, 0x555555, 0x222222);
            grid.position.y = -0.001;
            scene.add(grid);

            // --- Create a Dark Red Box ---
            const box = new THREE.Mesh(
                new THREE.BoxGeometry(1, 1, 1),
                new THREE.MeshStandardMaterial({ color: 0x8B0000, metalness: 0.6, roughness: 0.4 })
            );
            box.position.set(0, 0.5, 0);
            scene.add(box);

            // --- Add Ambient Light ---
            const ambientLight = new THREE.AmbientLight(0xFFFFFF, 0.3);
            scene.add(ambientLight);

            // --- Add Directional Light ---
            const directionalLight = new THREE.DirectionalLight(0xFFFFFF, 1);
            directionalLight.position.set(2, 4, 2);
            scene.add(directionalLight);

            // --- Animation Loop ---
            function animate() {
                requestAnimationFrame(animate);
                controls.update();
                renderer.render(scene, camera);
            }
            animate();

            // --- Handle Window Resize ---
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        })();
    </script>
</body>
</html>
